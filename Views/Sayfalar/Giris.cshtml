@{
    Layout = null;
}

<!doctype html>
<html lang="tr" dir="ltr">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>U Portal Giriş</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/css/toastr.min.css" rel="stylesheet">
    <!-- Favicon -->
    <link rel="shortcut icon" href="../../assets/images/favicon.ico" />

    <!-- Library / Plugin Css Build -->
    <link rel="stylesheet" href="../../assets/css/core/libs.min.css" />

    <!-- Hope Ui Design System Css -->
    <link rel="stylesheet" href="../../assets/css/hope-ui.min.css?v=2.0.0" />

    <!-- Custom Css -->
    <link rel="stylesheet" href="../../assets/css/custom.min.css?v=2.0.0" />

    <!-- Dark Css -->
    <link rel="stylesheet" href="../../assets/css/dark.min.css" />

    <!-- Customizer Css -->
    <link rel="stylesheet" href="../../assets/css/customizer.min.css" />

    <!-- RTL Css -->
    <link rel="stylesheet" href="../../assets/css/rtl.min.css" />
   
    <style>
            .img-wrapper {
	            width: 100%;
	            height: 100vh;
	            overflow: hidden;
	            position: relative;
	            background-color: #000;
            }
            .img-wrapper>div {
	            width: 100%;
	            height: 100%;
	            position: absolute;
	            animation: animate 30s infinite;
	            opacity: 0;
	            --webkit-background-size: cover;
	            background-size: cover;
	            background-position: center center;
            }
            .img-wrapper>div:nth-child(2) {
	            animation-delay: 5s;
            }
            .img-wrapper>div:nth-child(3) {
	            animation-delay: 10s;
            }
            .img-wrapper>div:nth-child(4) {
	            animation-delay: 15s;
            }
            .img-wrapper>div:nth-child(5) {
	            animation-delay: 20s;
            }
                .img-wrapper > div:nth-child(6) {
                    animation-delay: 25s;
                }
                .img-wrapper > div:nth-child(7) {
                    animation-delay: 30s;
                }
                .img-wrapper > div:nth-child(8) {
                    animation-delay: 35s;
                }
                .img-wrapper > div:nth-child(9) {
                    animation-delay: 40s;
                }
                .img-wrapper > div:nth-child(10) {
                    animation-delay: 45s;
                }
                .img-wrapper > div:nth-child(11) {
                    animation-delay: 50s;
                }
            @@keyframes animate {
	            10% {
		            opacity: 1;
	            }
	            20% {
		            opacity: 1;
	            }
	            30% {
		            opacity: 0;
	            }
	            40% {
		            transform: scale(1.2);
	            }
            }

    </style>

</head>
<body class=" " data-bs-spy="scroll" data-bs-target="#elements-section" data-bs-offset="0" tabindex="0">
    <div class="wrapper">
        <section class="login-content">
            <div class="row m-0 align-items-center bg-white vh-100">
                <div class="col-md-6">
                    <div class="row justify-content-center">
                        <div class="col-md-10">
                            <div class="card card-transparent shadow-none d-flex justify-content-center mb-0 auth-card">
                                <div class="card-body">

                                    <h2 class="mb-2 text-center"><img style="width:100px" src="../../assets/images/ulogo.png" /> Portal</h2>
                                    @*<p class="text-center">Login to stay connected.</p>*@
                                <div class="row">
                                    <div class="col-lg-12">
                                        <div class="form-group">
                                            <label for="email" class="form-label">Kullanıcı Adı</label>
                                            <input type="email" class="form-control" id="email" aria-describedby="email" placeholder=" ">
                                        </div>
                                    </div>
                                    <div class="col-lg-12">
                                        <div class="form-group">
                                            <label for="password" class="form-label">Şifre</label>
                                            <input type="password" class="form-control" id="password" aria-describedby="password" placeholder=" ">
                                        </div>
                                    </div>
                                    @*<div class="col-lg-12">
                                        <div class="form-group">
                                            <label for="drpSube" class="form-label">Şube</label>
                                            <select id="drpSube" class="form-select" style="width: 100%;"></select>
                                        </div>

                                    </div>*@
                                </div>
                                    <div class="d-flex justify-content-center">
                                        <button type="button" class="btn btn-primary" id="btnGiris" onclick="girisYap()">Giriş Yap</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="sign-bg">
                        <svg width="280" height="230" viewBox="0 0 431 398" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <g opacity="0.05">
                                <rect x="-157.085" y="193.773" width="543" height="77.5714" rx="38.7857" transform="rotate(-45 -157.085 193.773)" fill="#2E6D4C" />
                                <rect x="7.46875" y="358.327" width="543" height="77.5714" rx="38.7857" transform="rotate(-45 7.46875 358.327)" fill="#2E6D4C" />
                                <rect x="61.9355" y="138.545" width="310.286" height="77.5714" rx="38.7857" transform="rotate(45 61.9355 138.545)" fill="#2E6D4C" />
                                <rect x="62.3154" y="-190.173" width="543" height="77.5714" rx="38.7857" transform="rotate(45 62.3154 -190.173)" fill="#2E6D4C" />
                            </g>
                        </svg>
                    </div>
                </div>
                <div class="col-md-6 d-md-block d-none bg-primary p-0 mt-n1 vh-100 overflow-hidden">
                    <div class="img-wrapper">
                        <div style="background-image: url(../assets/images/auth/auth1.jpg)"></div>
                        <div style="background-image: url(../assets/images/auth/auth2.jpg)"></div>
                        <div style="background-image: url(../assets/images/auth/auth3.jpg)"></div>
                        <div style="background-image: url(../assets/images/auth/auth4.jpg)"></div>
                        <div style="background-image: url(../assets/images/auth/auth5.jpg)"></div>
                        <div style="background-image: url(../assets/images/auth/auth6.jpg)"></div>
                        <div style="background-image: url(../assets/images/auth/auth7.jpg)"></div>
                        <div style="background-image: url(../assets/images/auth/auth8.jpg)"></div>
                        <div style="background-image: url(../assets/images/auth/auth9.jpg)"></div>
                        <div style="background-image: url(../assets/images/auth/auth10.jpg)"></div>
                        <div style="background-image: url(../assets/images/auth/auth11.jpg)"></div>

                    </div>
                </div>
            </div>
        </section>
    </div>
    <script src="~/Scripts/jquery-3.7.0.min.js"></script>

    <script src="~/assets/js/hope-ui.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/js/toastr.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/spin.js/2.3.2/spin.min.js"></script>

    <script>
        "use strict";
        $(document).ready(function () {
            sessionStorage.clear();
            $(document).keypress(function (event) {
                // Check if the pressed key is Enter (keyCode 13)
                if (event.which === 13) {
                    // Call the girisYap() function
                    girisYap();
                }
            });

        });
        function isNullOrEmpty(str) {
            return str == null || str == "0" || (typeof str === 'string' && str.trim() === '');
        }
        function girisYap() {
            const eposta = $("#email").val();
            const sifre = $("#password").val();
            if (isNullOrEmpty(eposta) || isNullOrEmpty(sifre)) {
                toastr["info"]("Boş alanları kontrol ediniz.");
            }
            else {
                $("#btnGiris").prop("disabled", true);
                var spinner = new Spinner().spin(document.getElementById("btnGiris"));
                const formdata = new FormData();
                formdata.append("username", eposta);
                formdata.append("pass", sifre);

                $.ajax({
                    url: "/api/login",
                    data: formdata,
                    processData: false,
                    contentType: false,

                    type: "POST",
                    success: function (data, textStatus, xhr) {
                        console.log(xhr);
                        if (xhr.status === 200) {
                            toastr["success"]("Giriş başarılı.");
                            window.location.href = "../ana-sayfa";
                        }
                    },
                    error: function (xhr, textStatus, errorThrown) {
                        toastr["error"]("Giriş yapılamıyor!");
                    },
                    complete: function () {
                        $("#btnGiris").prop("disabled", false);
                        spinner.stop();
                    }
                });
            }        
        }
    </script>
</body>
</html>